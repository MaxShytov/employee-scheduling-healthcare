{# templates/core/components/form_section_card.html #}
{% comment %}
Component: Form Section Card
Description: Card wrapper for form field groups with icon and title

Props:
  - title: str (required) - Section title
  - icon: str (optional) - Material icon name
  - fields: list[dict] (required) - List of form fields
    Structure: [
      {'field': form.first_name, 'col_class': 'col-md-6'},
      {'field': form.last_name, 'col_class': 'col-md-6', 'help_text': 'Custom help'},
      {'field': form.employee_id, 'col_class': 'col-md-6', 'has_toggle': True, 'toggle_field': form.is_active}
    ]
  - card_class: str (optional, default='mb-4') - Additional CSS classes

Usage:
  {% include "core/components/form_section_card.html" with title=_('Personal Information') icon='person' fields=personal_fields %}
{% endcomment %}

<div class="card border-0 shadow-sm {{ card_class|default:'mb-4' }}">
    <div class="card-header bg-white">
        <h5 class="mb-0">
            {% if icon %}
            <span class="material-icons align-middle me-2">{{ icon }}</span>
            {% endif %}
            {{ title }}
        </h5>
    </div>
    <div class="card-body">
        <div class="row">
            {% for field_config in fields %}
                {% if field_config.has_toggle %}
                    {# Field with toggle buttons (e.g., Employee ID with Active/Inactive) #}
                    {% include "core/components/form_field_with_toggle.html" with field=field_config.field toggle_field=field_config.toggle_field col_class=field_config.col_class|default:'col-12' %}
                {% elif field_config.is_image %}
                    {# Image upload field with preview - uses custom_image_input component #}
                    <div class="{{ field_config.col_class|default:'col-12' }}">
                        {% include "core/components/custom_image_input.html" with field=field_config.field current_image_url=field_config.current_image_url upload_url=field_config.upload_url ajax_delete_url=field_config.ajax_delete_url %}
                    </div>
                {% else %}
                    {# Regular form field #}
                    {% include "core/components/form_field.html" with field=field_config.field col_class=field_config.col_class|default:'col-12' help_text=field_config.help_text %}
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>