{% comment %}
Component: filter_bar.html
Description: Filter bar with search and multiple filter dropdowns

Props:
  - form: Form object with filter fields
  - show_search: bool (optional) - Show search field
  - search_placeholder: str (optional) - Search placeholder text
  - show_department_filter: bool (optional) - Show department dropdown
  - show_location_filter: bool (optional) - Show location dropdown
  - show_position_filter: bool (optional) - Show position dropdown
  - show_status_filter: bool (optional) - Show status dropdown
  - show_employment_type_filter: bool (optional) - Show employment type dropdown

Usage:
  {% include "core/components/filter_bar.html" with form=filter_form show_search=True show_department_filter=True show_location_filter=True show_position_filter=True show_status_filter=True %}
{% endcomment %}
{% load i18n %}
{% load widget_tweaks %}

<div class="card mb-4 border-0 shadow-sm">
    <div class="card-body">
        <form method="get" id="filterForm" class="needs-validation">
            <div class="row g-2 align-items-end">
                {% comment %} English: Search field - reduced to col-2 {% endcomment %}
                {% if show_search %}
                <div class="col-2">
                    {% if form.search %}
                        <label class="form-label small text-muted mb-1">{{ form.search.label }}</label>
                        {{ form.search|add_class:"form-control form-control-sm" }}
                    {% else %}
                        <label class="form-label small text-muted mb-1">{% trans "Search" %}</label>
                        <input type="text" 
                               name="search" 
                               class="form-control form-control-sm" 
                               placeholder="{{ search_placeholder|default:'Search...' }}"
                               value="{{ request.GET.search }}">
                    {% endif %}
                </div>
                {% endif %}
                
                {% comment %} English: Department filter {% endcomment %}
                {% if show_department_filter and form.department %}
                <div class="col-2">
                    <label class="form-label small text-muted mb-1">{{ form.department.label }}</label>
                    {{ form.department|add_class:"form-select form-select-sm" }}
                </div>
                {% endif %}
                
                {% comment %} English: Location filter - NEW {% endcomment %}
                {% if show_location_filter and form.location %}
                <div class="col-2">
                    <label class="form-label small text-muted mb-1">{{ form.location.label }}</label>
                    {{ form.location|add_class:"form-select form-select-sm" }}
                </div>
                {% endif %}
                
                {% comment %} English: Position filter {% endcomment %}
                {% if show_position_filter and form.position %}
                <div class="col-2">
                    <label class="form-label small text-muted mb-1">{{ form.position.label }}</label>
                    {{ form.position|add_class:"form-select form-select-sm" }}
                </div>
                {% endif %}
                
                {% comment %} English: Status filter {% endcomment %}
                {% if show_status_filter and form.status %}
                <div class="col-2">
                    <label class="form-label small text-muted mb-1">{{ form.status.label }}</label>
                    {{ form.status|add_class:"form-select form-select-sm" }}
                </div>
                {% endif %}
                
                {% comment %} English: Employment type filter {% endcomment %}
                {% if show_employment_type_filter and form.employment_type %}
                <div class="col-2">
                    <label class="form-label small text-muted mb-1">{{ form.employment_type.label }}</label>
                    {{ form.employment_type|add_class:"form-select form-select-sm" }}
                </div>
                {% endif %}
                
                {% comment %} English: Action buttons - fixed size col-2 to prevent wrapping {% endcomment %}
                <div class="col-2">
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary btn-sm flex-fill">
                            <span class="material-icons align-middle" style="font-size: 16px;">filter_list</span>
                            <span class="d-none d-lg-inline ms-1">{% trans "Apply" %}</span>
                        </button>
                        <a href="{{ request.path }}" class="btn btn-outline-secondary btn-sm flex-fill">
                            <span class="material-icons align-middle" style="font-size: 16px;">clear</span>
                            <span class="d-none d-lg-inline ms-1">{% trans "Clear" %}</span>
                        </a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<style>
.form-label.small {
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* English: Ensure form controls are compact */
.form-select-sm,
.form-control-sm {
    font-size: 0.875rem;
}

.form-select-sm {
    padding: 0.375rem 2rem 0.375rem 0.75rem;
}

.form-control-sm {
    padding: 0.375rem 0.75rem;
}

/* English: Compact button group */
.btn-sm {
    padding: 0.375rem 0.75rem;
    font-size: 0.875rem;
}
</style>