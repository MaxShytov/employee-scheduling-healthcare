{% load i18n %}

<div class="card border-0 shadow-sm h-100">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
            <div class="flex-grow-1">
                <p class="text-muted mb-1 small text-uppercase fw-semibold">{{ title }}</p>
                <h3 class="mb-2">{{ value|default:"0" }}</h3>
                
                {% if subtitle %}
                <p class="text-muted mb-0 small">{{ subtitle }}</p>
                {% endif %}
                
                {% if trend_value %}
                <div class="d-flex align-items-center mt-2">
                    {% if trend_direction == "up" %}
                        <span class="material-icons text-success me-1" style="font-size: 18px;">trending_up</span>
                        <span class="text-success small fw-medium">+{{ trend_value }}%</span>
                    {% elif trend_direction == "down" %}
                        <span class="material-icons text-danger me-1" style="font-size: 18px;">trending_down</span>
                        <span class="text-danger small fw-medium">-{{ trend_value }}%</span>
                    {% else %}
                        <span class="material-icons text-muted me-1" style="font-size: 18px;">trending_flat</span>
                        <span class="text-muted small">{{ trend_value }}%</span>
                    {% endif %}
                    <span class="text-muted small ms-1">vs last month</span>
                </div>
                {% endif %}
            </div>
            
            <div class="stat-icon-wrapper bg-{{ bg_color|default:'primary' }}-subtle">
                <span class="material-icons text-{{ bg_color|default:'primary' }}">{{ icon }}</span>
            </div>
        </div>
        
        {% if progress_value %}
        <div class="progress mt-3" style="height: 4px;">
            <div class="progress-bar bg-{{ bg_color|default:'primary' }}" 
                 role="progressbar" 
                 style="width: {{ progress_value }}%"
                 aria-valuenow="{{ progress_value }}" 
                 aria-valuemin="0" 
                 aria-valuemax="100">
            </div>
        </div>
        {% endif %}
        
        {% if link_url and link_text %}
        <div class="mt-3">
            <a href="{{ link_url }}" class="text-decoration-none small">
                {{ link_text }}
                <span class="material-icons align-middle ms-1" style="font-size: 14px;">arrow_forward</span>
            </a>
        </div>
        {% endif %}
    </div>
</div>

<style>
.stat-icon-wrapper {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.stat-icon-wrapper .material-icons {
    font-size: 24px;
}

/* Bootstrap 5 color utilities for backgrounds */
.bg-primary-subtle { background-color: rgba(13, 110, 253, 0.1); }
.bg-success-subtle { background-color: rgba(25, 135, 84, 0.1); }
.bg-info-subtle { background-color: rgba(13, 202, 240, 0.1); }
.bg-warning-subtle { background-color: rgba(255, 193, 7, 0.1); }
.bg-danger-subtle { background-color: rgba(220, 53, 69, 0.1); }
.bg-secondary-subtle { background-color: rgba(108, 117, 125, 0.1); }

/* Hover effect for card */
.card:hover {
    transform: translateY(-2px);
    transition: transform 0.2s ease;
}
</style>